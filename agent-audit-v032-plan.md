# agent-audit ä¸‰ç‰ˆè¿­ä»£å¯¹æ¯”åˆ†æ & v0.3.2 æ–¹æ¡ˆ

> **v0.2.0 â†’ v0.3.0 â†’ v0.3.1 å…¨é“¾è·¯å¤ç›˜**
> **æ—¥æœŸ: 2026-02-04**

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸‰ç‰ˆæ ¸å¿ƒæŒ‡æ ‡å¯¹æ¯”

### 1. Findings æ•°é‡æ¼”è¿›

| ID | é¡¹ç›® | v0.2.0 | v0.3.0 | v0.3.1 | è¶‹åŠ¿ | åˆ¤å®š |
|----|------|--------|--------|--------|------|------|
| T1 | damn-vulnerable-llm-agent | 0 | 0 | **1** | 0â†’0â†’1 | âš ï¸ æœ‰è¿›å±•ä½†ä¸è¶³ |
| T2 | DamnVulnerableLLMProject | 80 | 80 | 80 | ç¨³å®š | âš ï¸ ASIè¦†ç›–çª„ |
| T3 | langchain/agents | 93 | 8 | 10 | **-89%** | âœ… æ˜¾è‘—æ”¹å–„ |
| T4 | agents-from-scratch | 14 | 18 | 18 | +29% | âœ… æ–°è§„åˆ™åˆç†è´¡çŒ® |
| T5 | deepagents | 35 | 71 | 71 | +103% | âš ï¸ AGENT-028å¾…æŸ¥ |
| T6 | openai-agents-python | 23 | 23 | 23 | ç¨³å®š | âœ… |
| T7 | adk-python | 64 | 64 | 64 | ç¨³å®š | âœ… |
| T8 | agentscope | 19 | 26 | 26 | +37% | âœ… æ–°è§„åˆ™åˆç†è´¡çŒ® |
| T9 | crewAI | 124 | 739 | **250** | 124â†’739â†’250 | âš ï¸ æ”¹å–„ä¸­ä½†ä»åé«˜ |
| T10 | 100-tool-mcp-server-json | 0 | 18 | 18 | **0â†’18** | âœ… å®Œå…¨ä¿®å¤ |
| T11 | streamlit-agent | 1 | 4 | 6 | +500% | âœ… æ–°è§„åˆ™åˆç†è´¡çŒ® |
| **åˆè®¡** | | **453** | **1,051** | **567** | 453â†’1051â†’567 | âš ï¸ è¶‹åŠ¿å‘å¥½ |

### 2. OWASP è¦†ç›–æ¼”è¿›

| ASI | v0.2.0 | v0.3.0 | v0.3.1 | çŠ¶æ€ |
|-----|--------|--------|--------|------|
| ASI-01 Goal Hijack | âœ… | âœ… | âœ… | ç¨³å®š |
| ASI-02 Tool Misuse | âŒ | âœ… | âœ… | **v0.3.0ä¿®å¤** |
| ASI-03 Identity/Privilege | âœ… | âŒ | âŒ | **å›å½’æœªæ¢å¤** âŒ |
| ASI-04 Supply Chain | âœ… | âœ… | âœ… | ç¨³å®š |
| ASI-05 Code Execution | âœ… | âœ… | âœ… | ç¨³å®š |
| ASI-06 Memory Poisoning | âœ… | âœ… | âœ… | ç¨³å®š |
| ASI-07 Inter-Agent Comm | âœ… | âœ… | âœ… | ç¨³å®š |
| ASI-08 Cascading Failures | âœ… | âœ… | âœ… | ç¨³å®š |
| ASI-09 Human-Agent Trust | âŒ | âœ… | âœ… | **v0.3.0ä¿®å¤** |
| ASI-10 Rogue Agents | âœ… | âœ… | âœ… | ç¨³å®š |
| **æ€»è®¡** | **8/10** | **9/10** | **9/10** | å‡€+1 |

### 3. ç»¼åˆè¯„çº§æ¼”è¿›

| ç»´åº¦ | v0.2.0 | v0.3.0 | v0.3.1 | è¶‹åŠ¿ |
|------|--------|--------|--------|------|
| æ£€å‡ºç‡ | âš ï¸ | âš ï¸ | âš ï¸ | T1ä»0â†’1ï¼Œæœ‰è¿›å±• |
| è¯¯æŠ¥ç‡ | âš ï¸ | âŒ (T9çˆ†) | âš ï¸ | T9ä»739â†’250ï¼Œæ”¹å–„ä¸­ |
| å¥å£®æ€§ | âœ… | âœ… | âœ… | å§‹ç»ˆä¼˜ç§€ |
| OWASP | âœ… 8/10 | âœ… 9/10 | âœ… 9/10 | +1å‡€å¢ |
| **æ€»è¯„** | **ğŸŸ¡** | **ğŸŸ¡** | **ğŸŸ¡** | å†…éƒ¨è´¨é‡æå‡ä½†è¯„çº§æœªè·³çº§ |

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šv0.3.1 é—ç•™é—®é¢˜æ·±åº¦åˆ†æ

### é—®é¢˜ A [P0]: T1 ä»… 1 ä¸ª finding â€” æ•…æ„æ¼æ´é¡¹ç›®æ£€å‡ºä¸¥é‡ä¸è¶³

**ç°çŠ¶:** T1 æ˜¯æ•…æ„è®¾è®¡æœ‰æ¼æ´çš„ LangChain agentï¼Œä»…æ£€å‡º 1 ä¸ª AGENT-040ã€‚

**æœ¬è´¨é—®é¢˜:** è¿™ä¸æ˜¯"è§„åˆ™ä¸å­˜åœ¨"çš„é—®é¢˜ï¼Œè€Œæ˜¯"è§„åˆ™æ— æ³•åŒ¹é… T1 ä»£ç æ¨¡å¼"ã€‚
v0.3.0 æ–°å¢äº† AGENT-025~028ï¼ˆLangChainï¼‰+ AGENT-034~036ï¼ˆTool Misuseï¼‰ï¼Œ
ä½† T1 åªè§¦å‘äº† AGENT-040ã€‚è¯´æ˜ï¼š
- AGENT-025 çš„æ—§ç‰ˆ API åŒ¹é…è™½ç„¶æ‰©å±•äº†ï¼Œä½†å¯èƒ½ä»æœ‰è·¯å¾„æœªè¦†ç›–
- AGENT-026 (tool input unsanitized) æœªè§¦å‘ â€” T1 çš„ tool å¯èƒ½ä¸æ˜¯ @tool è£…é¥°å™¨æ–¹å¼
- AGENT-034 (tool no input validation) æœªè§¦å‘ â€” åŒä¸Š
- AGENT-035 (tool unrestricted execution) æœªè§¦å‘ â€” T1 çš„å±é™©å‡½æ•°å¯èƒ½ä¸åœ¨ tool å®šä¹‰å†…

**éœ€è¦çš„è¡ŒåŠ¨:** ç²¾å‡†åˆ†æ T1 æºç ä¸­æ¯ä¸ªæ–‡ä»¶ï¼Œé€ä¸ªç¡®è®¤å“ªäº›è§„åˆ™åº”è¯¥è§¦å‘ä½†æ²¡è§¦å‘ï¼Œç„¶åé’ˆå¯¹æ€§ä¿®å¤åŒ¹é…é€»è¾‘ã€‚

### é—®é¢˜ B [P0]: T2 ASI è¦†ç›–ä»… 1/10 â€” æ£€å‡ºç»“æ„æ€§å¤±è¡¡

**ç°çŠ¶:** T2 æœ‰ 80 findings ä½† 79 ä¸ªæ˜¯ AGENT-004ï¼ˆç¡¬ç¼–ç å‡­è¯ï¼‰ï¼Œä»…æ˜ å°„ ASI-02ã€‚
ä½œä¸ºæ•…æ„æ¼æ´é¡¹ç›®ï¼Œåº”è¦†ç›–æ›´å¤š ASI ç±»åˆ«ã€‚

**æœ¬è´¨é—®é¢˜:** T2 (DamnVulnerableLLMProject) åŒ…å«å¤šç§æ¼æ´ç±»å‹ï¼ˆprompt injectionã€
data exfiltrationã€tool abuseï¼‰ï¼Œä½†é™¤äº†å¯†é’¥æ³„éœ²å¤–å…¶ä»–æ¼æ´ç±»å‹æœªè¢«æ£€å‡ºã€‚

**éœ€è¦çš„è¡ŒåŠ¨:** åˆ†æ T2 çš„æ¼æ´æ¸…å• vs å½“å‰è§„åˆ™è¦†ç›–ï¼Œæ‰¾å‡ºé—æ¼çš„åŒ¹é…ã€‚

### é—®é¢˜ C [P1]: T9 crewAI ä»æœ‰ 250 findings

**ç°çŠ¶:** v0.3.0â†’v0.3.1 AGENT-028 ä» 489â†’0ï¼ˆH2 ç”Ÿæ•ˆï¼‰ï¼Œæ€»é‡ä» 739â†’250ã€‚
ä½† 250 ä»åé«˜ï¼Œä¸»è¦è´¡çŒ®ï¼šAGENT-039 (trust boundary) 72 ä¸ªã€‚

**ä¿®å¤æ–¹å‘:** ä¸º AGENT-039 æ·»åŠ ç±»ä¼¼ AGENT-028 çš„æ¡†æ¶ç™½åå•ã€‚crewAI çš„ multi-agent
é€šä¿¡æ˜¯æ¡†æ¶è®¾è®¡ç‰¹æ€§ï¼Œä¸åº”æŒ‰ trust boundary violation æŠ¥å‘Šã€‚

### é—®é¢˜ D [P1]: ASI-03 å§‹ç»ˆæœªæ¢å¤

**ç°çŠ¶:** H3 å·²ä¸º AGENT-038 æ·»åŠ  ASI-03 secondary æ˜ å°„ï¼Œä½† benchmark ä¸­
AGENT-038 æœªåœ¨ä»»ä½•é¡¹ç›®ä¸­è§¦å‘ï¼Œå¯¼è‡´ ASI-03 ä»ä¸ºé›¶ã€‚

**æ ¹å› :** AGENT-038 æ£€æµ‹ "system prompt æŒ‡ç¤º agent å†’å……äººç±»"ï¼Œ
ä½†çœŸå®é¡¹ç›®ä¸­è¿™ç±»æ¨¡å¼ä¸å¸¸è§ã€‚

**ä¿®å¤æ–¹å‘:** ASI-03 éœ€è¦æ›´å®é™…çš„æ£€æµ‹è§„åˆ™ã€‚Identity & Privilege Abuse
æ›´å®é™…çš„æ£€æµ‹åœºæ™¯æ˜¯ï¼šagent æ‹¥æœ‰è¿‡å¤š tools/æƒé™ä½†æ— é™åˆ¶ã€‚
éœ€æ£€æŸ¥æ˜¯å¦å·²æœ‰ AGENT-002 (Excessive Agent Permissions) ä½†æœªè§¦å‘ï¼Œæˆ–åˆ›å»ºæ–°è§„åˆ™ã€‚

### é—®é¢˜ E [P2]: T5 ç¿»å€ï¼ˆ35â†’71ï¼‰æœªè°ƒæŸ¥

T5 (deepagents) ä» 35â†’71ï¼Œå¢é‡çº¦ 36 ä¸ª findingsã€‚
éœ€ç¡®è®¤æ˜¯å¦å…¨éƒ¨æ¥è‡ªæ–°è§„åˆ™çš„åˆç†æ£€å‡ºï¼Œè¿˜æ˜¯æœ‰è¯¯æŠ¥ã€‚

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šv0.3.2 ä¼˜åŒ–æ–¹æ¡ˆ

### ç­–ç•¥è½¬å˜

v0.3.0/v0.3.1 çš„æ•™è®­ï¼š**ç›²ç›®æ–°å¢è§„åˆ™ + ç™½åå•è¡¥æ•‘**çš„æ¨¡å¼å¯¼è‡´è¿­ä»£æ•ˆç‡ä½ã€‚
v0.3.2 åº”é‡‡å–**ç²¾å‡†æ‰“å‡»**ç­–ç•¥ï¼š

1. **å…ˆåˆ†æç›®æ ‡ä»£ç å†å†™è§„åˆ™** â€” ä¸æ˜¯å…ˆå†™è§„åˆ™å†çœ‹èƒ½ä¸èƒ½åŒ¹é…
2. **å•é¡¹ç›®æ·±åº¦ä¿®å¤** â€” T1/T2 æ˜¯æ•…æ„æ¼æ´é¡¹ç›®ï¼Œé€æ–‡ä»¶åˆ†æ
3. **ç™½åå•ä¸€æ¬¡åˆ°ä½** â€” AGENT-039 å¤ç”¨ AGENT-028 ç™½åå•æ¡†æ¶
4. **ASI-03 é€šè¿‡æ‰©å±•ç°æœ‰è§„åˆ™è§£å†³** â€” ä¸æ–°å¢è§„åˆ™

---

## ç¬¬å››éƒ¨åˆ†ï¼šClaude Code Prompts

### Prompt F1: T1/T2 ç²¾å‡†æ£€å‡ºæå‡ [P0]

```
ä½ æ˜¯ agent-audit çš„æ ¸å¿ƒå¼€å‘è€…ã€‚å½“å‰æœ€å…³é”®çš„é—®é¢˜æ˜¯ï¼š
ä¸¤ä¸ªæ•…æ„æ¼æ´é¡¹ç›® T1 å’Œ T2 çš„æ£€å‡ºç‡ä¸¥é‡ä¸è¶³ï¼Œè¿™ç›´æ¥å½±å“å·¥å…·çš„å¯ä¿¡åº¦ã€‚

## é‡è¦åŸåˆ™
æœ¬æ¬¡ä¿®å¤é‡‡å–"å…ˆåˆ†æä»£ç ã€å†ä¿®å¤è§„åˆ™"çš„ç­–ç•¥ã€‚ä¸è¦ç›²ç›®æ–°å¢è§„åˆ™ï¼Œ
è€Œæ˜¯ç²¾å‡†ç†è§£ç›®æ ‡ä»£ç ä¸ºä»€ä¹ˆæ²¡è¢«ç°æœ‰è§„åˆ™å‘½ä¸­ï¼Œç„¶åä¿®å¤åŒ¹é…é€»è¾‘ã€‚

## é˜¶æ®µ 1ï¼šé€æ–‡ä»¶åˆ†æ T1

```bash
# 1. åˆ—å‡º T1 æ‰€æœ‰ Python æ–‡ä»¶
find /tmp/benchmark/repos/damn-vulnerable-llm-agent -name "*.py" -type f | sort

# 2. é€ä¸ªè¯»å–å¹¶åˆ†æ
for f in $(find /tmp/benchmark/repos/damn-vulnerable-llm-agent -name "*.py" -type f); do
    echo "========== $f =========="
    cat "$f"
    echo ""
done
```

å¯¹æ¯ä¸ªæ–‡ä»¶ï¼Œå›ç­”ï¼š
- è¿™ä¸ªæ–‡ä»¶æœ‰å“ªäº›å®‰å…¨é£é™©ï¼Ÿ
- å½“å‰å“ªäº›è§„åˆ™åº”è¯¥åŒ¹é…è¿™ä¸ªæ–‡ä»¶ï¼Ÿ
- ä¸ºä»€ä¹ˆè¿™äº›è§„åˆ™æ²¡æœ‰è§¦å‘ï¼Ÿå…·ä½“æ˜¯ AST æ¨¡å¼ä¸åŒ¹é…ã€import è·¯å¾„ä¸åŒ¹é…ã€è¿˜æ˜¯å…¶ä»–åŸå› ï¼Ÿ

è¾“å‡ºä¸€ä¸ªè¡¨æ ¼ï¼š

| æ–‡ä»¶ | å®‰å…¨é£é™© | åº”è§¦å‘è§„åˆ™ | æœªè§¦å‘åŸå›  | ä¿®å¤æ–¹æ¡ˆ |
|------|---------|-----------|-----------|---------|

## é˜¶æ®µ 2ï¼šé€æ–‡ä»¶åˆ†æ T2

```bash
# åŒä¸Šï¼Œåˆ—å‡ºå¹¶åˆ†æ T2 æ‰€æœ‰ Python æ–‡ä»¶
find /tmp/benchmark/repos/DamnVulnerableLLMProject -name "*.py" -type f | sort
# è¯»å–æ¯ä¸ªæ–‡ä»¶...
```

é‡ç‚¹å…³æ³¨é AGENT-004 (credential) ç±»å‹çš„æ¼æ´ï¼š
- Prompt injection é£é™© â†’ åº”è§¦å‘ AGENT-027 æˆ– AGENT-010
- Data exfiltration â†’ åº”è§¦å‘ AGENT-003
- Unsafe tool usage â†’ åº”è§¦å‘ AGENT-026/034/035
- Unrestricted agent â†’ åº”è§¦å‘ AGENT-025/028

## é˜¶æ®µ 3ï¼šç²¾å‡†ä¿®å¤

æ ¹æ®é˜¶æ®µ 1/2 çš„åˆ†æç»“æœï¼Œé€ä¸ªä¿®å¤è§„åˆ™çš„åŒ¹é…é€»è¾‘ã€‚
å¯¹æ¯ä¸ªä¿®å¤ï¼š

1. æ˜ç¡®è¯´æ˜ä¿®å¤äº†ä»€ä¹ˆåŒ¹é…é—®é¢˜
2. æ·»åŠ å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆç”¨ T1/T2 çš„å®é™…ä»£ç æ¨¡å¼ï¼‰
3. ç¡®è®¤ä¿®å¤ä¸å½±å“å…¶ä»–é¡¹ç›®

å¸¸è§ä¿®å¤ç±»å‹ï¼ˆé¢„åˆ¤ï¼‰ï¼š
- **Import è·¯å¾„ä¸åŒ¹é…:** è§„åˆ™æ£€æµ‹ `from langchain.agents import Tool`
  ä½†ä»£ç ä½¿ç”¨ `from langchain.tools import Tool` æˆ– `from langchain_community.tools import ...`
- **AST æ¨¡å¼ä¸åŒ¹é…:** è§„åˆ™æ£€æµ‹ `@tool` è£…é¥°å™¨ä½†ä»£ç ä½¿ç”¨ `Tool(func=xxx)` æ„é€ å‡½æ•°
- **å‡½æ•°åä¸åŒ¹é…:** è§„åˆ™æ£€æµ‹å›ºå®šå‡½æ•°åä½†ä»£ç ä½¿ç”¨åˆ«åæˆ–é—´æ¥å¼•ç”¨
- **ä½œç”¨åŸŸä¸åŒ¹é…:** è§„åˆ™åªæ£€æµ‹æ¨¡å—çº§ä»£ç ä½†æ¼æ´åœ¨ç±»æ–¹æ³•æˆ–åµŒå¥—å‡½æ•°ä¸­

## é˜¶æ®µ 4ï¼šéªŒè¯

```bash
# T1 é‡è·‘
agent-audit scan /tmp/benchmark/repos/damn-vulnerable-llm-agent --format json

# T2 é‡è·‘
agent-audit scan /tmp/benchmark/repos/DamnVulnerableLLMProject --format json

# éªŒè¯å…¶ä»–é¡¹ç›®ä¸å›å½’
for d in T3 T4 T5 T6 T7 T8 T9 T10 T11; do
    echo "=== $d ==="
    agent-audit scan /tmp/benchmark/repos/$d --format json 2>/dev/null | \
        python3 -c "import json,sys; d=json.load(sys.stdin); print(f'findings: {len(d.get(\"findings\",[]))}')"
done
```

## éªŒæ”¶æ ‡å‡†
â–¡ T1 findings >= 3 ä¸”è¦†ç›– >= 2 ä¸ª ASI ç±»åˆ«
â–¡ T2 è¦†ç›– >= 3 ä¸ª ASI ç±»åˆ«ï¼ˆä¸ä»…æ˜¯ ASI-02/credentialï¼‰
â–¡ T3-T11 findings å˜åŒ– < 15%ï¼ˆæ— è´Ÿé¢å›å½’ï¼‰
â–¡ æ‰€æœ‰ä¿®å¤æœ‰å¯¹åº”æµ‹è¯•
â–¡ æ‰€æœ‰ç°æœ‰æµ‹è¯•é€šè¿‡
```

---

### Prompt F2: AGENT-039 ç™½åå• + T9 ç²¾ç®€ + ASI-03 [P1]

```
ä½ æ˜¯ agent-audit çš„æ ¸å¿ƒå¼€å‘è€…ï¼Œä¿®å¤ä¸‰ä¸ªå…³è”é—®é¢˜ï¼š
1. T9 (crewAI) AGENT-039 è§¦å‘ 72 æ¬¡ â†’ éœ€è¦æ¡†æ¶ç™½åå•
2. ASI-03 å§‹ç»ˆæœªåœ¨çœŸå®é¡¹ç›®ä¸­è§¦å‘ â†’ éœ€è¦å®é™…å¯è§¦å‘çš„æ£€æµ‹é€»è¾‘
3. T5 (deepagents) 71 findings éœ€ç¡®è®¤æ˜¯å¦åˆç†

## ä»»åŠ¡ 1: AGENT-039 æ¡†æ¶ç™½åå•

### åˆ†æ T9 ä¸­ AGENT-039 çš„è§¦å‘æ¨¡å¼
```bash
# æŸ¥çœ‹ AGENT-039 åœ¨ crewAI ä¸­çš„ findings åˆ†å¸ƒ
cat /tmp/benchmark/results/T9.json | python3 -c "
import json, sys
data = json.load(sys.stdin)
findings = [f for f in data.get('findings', data) if f.get('rule_id') == 'AGENT-039']
print(f'Total AGENT-039: {len(findings)}')
files = {}
for f in findings:
    fp = f.get('file', '?')
    files[fp] = files.get(fp, 0) + 1
for fp, count in sorted(files.items(), key=lambda x: -x[1])[:15]:
    print(f'  {count:3d} | {fp}')
"
```

### å®æ–½ç™½åå•

å¤ç”¨ AGENT-028 çš„æ¡†æ¶ç™½åå•åŸºç¡€è®¾æ–½ã€‚åœ¨ `rules/allowlists/` ä¸­æ‰©å±•ï¼š

```yaml
# framework_trust_boundary.yaml æˆ–æ‰©å±•ç°æœ‰ç™½åå•

# AGENT-039 æ¡†æ¶ç™½åå•
# è¿™äº›æ¡†æ¶çš„ multi-agent é€šä¿¡æ˜¯è®¾è®¡ç‰¹æ€§ï¼Œä¸åº”æŠ¥ä¸º trust boundary violation
agent_039:
  crewai:
    modules:
      - "crewai.agents"
      - "crewai.crew"
      - "crewai.task"
      - "crewai.collaboration"
      - "crewai.utilities"
    rationale: "crewAI çš„ agent é—´é€šä¿¡æ˜¯æ¡†æ¶æ ¸å¿ƒè®¾è®¡"

  autogen:
    modules:
      - "autogen.agentchat"
      - "autogen.coding"
    rationale: "autogen GroupChat æ˜¯æ¡†æ¶è®¾è®¡çš„ multi-agent é€šä¿¡"

  deepagents:
    modules:
      - "deepagents.agents"
      - "deepagents.workflows"
```

## ä»»åŠ¡ 2: ASI-03 å®é™…å¯è§¦å‘æ£€æµ‹

### åˆ†æä¸ºä»€ä¹ˆ ASI-03 ä¸è§¦å‘

ASI-03 = Identity & Privilege Abuseã€‚å½“å‰æ˜ å°„åˆ° ASI-03 çš„è§„åˆ™ï¼š
- AGENT-002 (Excessive Agent Permissions) â€” æ£€æŸ¥å½“å‰å®ç°ä¸ºä»€ä¹ˆä¸è§¦å‘
- AGENT-038 (agent_impersonation_risk) â€” secondary mappingï¼Œä½†æœªè§¦å‘

```bash
# æ£€æŸ¥ AGENT-002 çš„å®ç°å’Œè§¦å‘æ¡ä»¶
grep -rn "AGENT.002\|excessive.*perm\|agent_002" rules/ packages/ --include="*.py" --include="*.yaml"
```

### æœ€å¯èƒ½çš„ä¿®å¤è·¯å¾„

**è·¯å¾„ A: ä¿®å¤ AGENT-002 çš„åŒ¹é…é€»è¾‘**

AGENT-002 (Excessive Agent Permissions) åº”æ£€æµ‹:
- Agent ç»‘å®šäº† > N ä¸ª toolsï¼ˆå¦‚ > 10 ä¸ªï¼‰ â†’ æƒé™è¿‡å¤§
- Agent åŒæ—¶æ‹¥æœ‰è¯»å–ã€å†™å…¥ã€æ‰§è¡Œã€ç½‘ç»œç±» tools â†’ å…¨èƒ½ agent
- Agent æ—  tool ä½¿ç”¨é™åˆ¶é…ç½®

å¦‚æœ AGENT-002 å·²æœ‰æ­¤é€»è¾‘ä½†ä¸è§¦å‘ï¼Œæ£€æŸ¥ï¼š
- æ˜¯å¦åªæ£€æµ‹ç‰¹å®šæ¡†æ¶æ ¼å¼ï¼Ÿ
- æ˜¯å¦é˜ˆå€¼è®¾ç½®ä¸åˆç†ï¼Ÿ
- T4/T5/T9 ä¸­æ˜ç¡®æœ‰ agent ç»‘å®šå¤šä¸ª tools çš„æ¨¡å¼ï¼Œä¸ºä»€ä¹ˆä¸è§¦å‘ï¼Ÿ

**è·¯å¾„ B: æ‰©å±• AGENT-002 çš„æ£€æµ‹èŒƒå›´**

```python
# åº”æ£€æµ‹çš„æ¨¡å¼:

# Pattern 1: tools åˆ—è¡¨è¿‡é•¿
tools = [tool1, tool2, tool3, ..., tool15]  # > 10 tools
agent = Agent(tools=tools)  # â†’ ASI-03

# Pattern 2: å…¨èƒ½ agentï¼ˆåŒæ—¶æœ‰è¯»+å†™+æ‰§è¡Œ+ç½‘ç»œï¼‰
tools = [read_file, write_file, run_shell, http_request]
agent = Agent(tools=tools)  # â†’ ASI-03

# Pattern 3: MCP server é…ç½®äº†è¿‡å¤š toolsï¼ˆT10 åœºæ™¯ï¼‰
# 100-tool-mcp-server â†’ æ˜æ˜¾è¿‡å¤š â†’ ASI-03
```

**è·¯å¾„ Cï¼ˆå…œåº•ï¼‰:** å¦‚æœ AGENT-002 ä¿®å¤åä»ç„¶åœ¨ benchmark ä¸­ä¸è§¦å‘ï¼ˆå› ä¸ºé¡¹ç›®ä»£ç æ¨¡å¼ä¸åŒ¹é…ï¼‰ï¼Œ
ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªè§„åˆ™åœ¨ T10 (100-tool MCP server) ä¸­è§¦å‘ ASI-03ï¼š
- 100 ä¸ª tools çš„ MCP server æ˜¯ ASI-03 çš„å…¸å‹åœºæ™¯
- æ£€æµ‹ MCP é…ç½®ä¸­å•ä¸ª server æš´éœ² > N ä¸ª tools â†’ ASI-03

## ä»»åŠ¡ 3: T5 åˆç†æ€§éªŒè¯

```bash
# å¯¹æ¯” T5 çš„ v0.2.0 å’Œ v0.3.1 findingsï¼Œçœ‹æ–°å¢çš„ 36 ä¸ªæ¥è‡ªå“ªäº›è§„åˆ™
cat /tmp/benchmark/results/T5.json | python3 -c "
import json, sys
data = json.load(sys.stdin)
rules = {}
for f in data.get('findings', data):
    rid = f.get('rule_id', '?')
    rules[rid] = rules.get(rid, 0) + 1
for rid, count in sorted(rules.items(), key=lambda x: -x[1]):
    print(f'  {count:3d} | {rid}')
"
```

å¦‚æœå¢é‡ä¸»è¦æ¥è‡ª AGENT-028/039 â†’ è€ƒè™‘ç™½åå•
å¦‚æœæ¥è‡ª AGENT-025/026/034 â†’ åˆç†æ£€å‡ºï¼Œä¿æŒ

## éªŒæ”¶æ ‡å‡†
â–¡ T9 æ€» findings < 180ï¼ˆAGENT-039 å¤§å¹…ä¸‹é™ï¼‰
â–¡ ASI-03 è‡³å°‘åœ¨ 1 ä¸ªé¡¹ç›®ä¸­è§¦å‘
â–¡ T5 å¢é‡æ¥æºå·²ç¡®è®¤å¹¶å¤„ç†
â–¡ æ‰€æœ‰æµ‹è¯•é€šè¿‡
â–¡ ä¸å½±å“å…¶ä»–é¡¹ç›®
```

---

### Prompt F3: æœ€ç»ˆé›†æˆéªŒè¯ä¸å‘ç‰ˆ

```
ä½ æ˜¯ agent-audit çš„ Release å·¥ç¨‹å¸ˆã€‚v0.3.2 ä¿®å¤å·²å®Œæˆã€‚
æ‰§è¡Œæœ€ç»ˆéªŒè¯ã€‚

## ä»»åŠ¡ 1: å…¨é‡æµ‹è¯•
```bash
cd packages/audit && poetry run pytest tests/ -v --tb=short 2>&1 | tail -30
```

## ä»»åŠ¡ 2: å®Œæ•´ Benchmark

```bash
echo "=== agent-audit v0.3.2 Benchmark ==="
echo ""
echo "| ID | é¡¹ç›® | Findings | Critical | High | Medium | ASI è¦†ç›– | çŠ¶æ€ |"
echo "|----|------|----------|----------|------|--------|----------|------|"

for dir in /tmp/benchmark/repos/*/; do
    name=$(basename "$dir")
    result=$(agent-audit scan "$dir" --format json 2>/dev/null)
    if [ $? -eq 0 ]; then
        echo "$result" | python3 -c "
import json, sys
d = json.load(sys.stdin)
fs = d.get('findings', [])
c = len([f for f in fs if f.get('severity') == 'critical'])
h = len([f for f in fs if f.get('severity') == 'high'])
m = len([f for f in fs if f.get('severity') == 'medium'])
cats = set()
for f in fs:
    cats.update(f.get('asi_categories', []))
print(f'| | $name | {len(fs)} | {c} | {h} | {m} | {\", \".join(sorted(cats))} | |')
" 2>/dev/null
    fi
done
```

## ä»»åŠ¡ 3: ç›®æ ‡å¯¹ç…§æ£€æŸ¥

| æŒ‡æ ‡ | v0.3.1 | v0.3.2 ç›®æ ‡ | å®é™… | Pass? |
|------|--------|------------|------|-------|
| T1 findings | 1 | >= 3 | ? | |
| T1 ASI è¦†ç›– | 1 | >= 2 | ? | |
| T2 ASI è¦†ç›– | 1 | >= 3 | ? | |
| T9 findings | 250 | < 180 | ? | |
| ASI-03 è§¦å‘ | âŒ | âœ… | ? | |
| OWASP æ€»è¦†ç›– | 9/10 | 10/10 | ? | |
| æ€»è¯„ | ğŸŸ¡ | ğŸŸ¢ | ? | |

## ä»»åŠ¡ 4: ç‰ˆæœ¬æ›´æ–°
- pyproject.toml â†’ 0.3.2
- CHANGELOG.md æ·»åŠ  v0.3.2 æ¡ç›®

## éªŒæ”¶æ ‡å‡†
â–¡ ä¸Šè¡¨æ‰€æœ‰æŒ‡æ ‡è¾¾æ ‡
â–¡ å…¨é‡æµ‹è¯•é€šè¿‡
â–¡ ç‰ˆæœ¬å·æ›´æ–°
```

---

## é™„å½•ï¼šå…¨é“¾è·¯ç‰ˆæœ¬æ¼”è¿›åœ°å›¾

```
v0.2.0 (åˆå§‹)
  æ£€å‡º: âš ï¸  è¯¯æŠ¥: âš ï¸  OWASP: 8/10  è¯„çº§: ğŸŸ¡
  é—®é¢˜: T1é›¶æ£€å‡º, T10é›¶æ£€å‡º, AGENT-018è¿‡æ•, ASI-02/09ç¼ºå¤±
    â”‚
    â”œâ”€ Prompt 0~6 (v0.3.0 æ–°å¢15æ¡è§„åˆ™ + ä¸‰çº§è¿‡æ»¤)
    â”‚
v0.3.0
  æ£€å‡º: âš ï¸  è¯¯æŠ¥: âŒ  OWASP: 9/10  è¯„çº§: ğŸŸ¡
  ä¿®å¤: T10âœ…, T3è¯¯æŠ¥-89%âœ…, ASI-02âœ…, ASI-09âœ…
  æ–°é—®é¢˜: T1ä»é›¶æ£€å‡º, T9çˆ†åˆ°739, ASI-03ä¸¢å¤±
    â”‚
    â”œâ”€ Prompt H1~H4 (æ—§ç‰ˆAPI + AGENT-028ç™½åå• + ASIæ˜ å°„)
    â”‚
v0.3.1
  æ£€å‡º: âš ï¸  è¯¯æŠ¥: âš ï¸  OWASP: 9/10  è¯„çº§: ğŸŸ¡
  ä¿®å¤: T1â†’1âœ…, T9â†’250âœ…, AGENT-028â†’0âœ…
  æ®‹ç•™: T1ä»…1ä¸ª, T2ä»…ASI-02, T9ä»250, ASI-03æœªæ¢å¤
    â”‚
    â”œâ”€ Prompt F1~F3 (ç²¾å‡†ä»£ç åˆ†æ + AGENT-039ç™½åå• + ASI-03)
    â”‚
v0.3.2 (ç›®æ ‡)
  æ£€å‡º: âœ…  è¯¯æŠ¥: âœ…  OWASP: 10/10  è¯„çº§: ğŸŸ¢
  ç›®æ ‡: T1>=3, T2 ASI>=3, T9<180, ASI-03è§¦å‘
```

### å…³é”®ç­–ç•¥è¿­ä»£

| ç‰ˆæœ¬ | ç­–ç•¥ | æ•™è®­ |
|------|------|------|
| v0.3.0 | å¤§é‡æ–°å¢è§„åˆ™ï¼ˆ15æ¡ï¼‰ | è§„åˆ™å¤šä½†åŒ¹é…ä¸ç²¾å‡†ï¼Œè¯¯æŠ¥çˆ†ç‚¸ |
| v0.3.1 | ç™½åå•è¡¥æ•‘ + API æ‰©å±• | ç™½åå•æœ‰æ•ˆä½†æ²»æ ‡ä¸æ²»æœ¬ |
| v0.3.2 | **å…ˆè¯»ä»£ç å†ä¿®è§„åˆ™** | ç²¾å‡†æ‰“å‡»ï¼Œä¸ç›²ç›®æ–°å¢ |
